---
title: Cloud Native Toolkit CLI
---
import Globals from 'gatsby-theme-carbon/src/templates/Globals';

<PageDescription>

The <Globals name="shortName" /> Command Line Interface (CLI)

</PageDescription>

The <Globals name="longName" /> includes the IBM Garage for Cloud (IGC) Command Line Interface (CLI). The [<Globals name="igccli" />](https://github.com/ibm-garage-cloud/ibm-garage-cloud-cli) provides a set of helpful utilities that can be invoked from the command line. The main objective is to make complicated CLI tasks and `YAML`,`configMap`, and `secret` configuration easier for a developer.

These utilities include:
- Register your application's git repo into a CI pipeline ([Jenkins](/guides/continuous-integration), [Tekton](/guides/continuous-integration-tekton), etc.)
- List the ingress URLs for the tools installed in the environment
- List the user names and passwords for the tools installed in the environment
- Build and deploy images to the environment using the IBM Cloud Image Registry
- Help copy `configMaps` and `secrets` into new projects/namespace in Kubernetes or OpenShift
- Enable existing <Globals name="templates" /> with the necessary artifacts to be integrated easily into the <Globals name="env" />

You can either install the CLI onto your computer or install the Cloud Shell Commands environment.

<Accordion>

<AccordionItem title="Install the CLI">

<InlineNotification kind="warning">
**Warning:** If you have installed the **IGC** CLI up to `v0.4.0` you must
 uninstall it and follow the installation steps below
`npm rm -g @garage-catalyst/ibm-garage-cloud-cli`
</InlineNotification>

- Install the CLI:
    ```bash
    npm i -g @ibmgaragecloud/cloud-native-toolkit-cli
    ````

- Verify the version:
    ```bash
    igc --version
    ```

</AccordionItem>

<AccordionItem title="Install the Cloud Shell">

Follow the instructions in the [cloud-shell-commands readme](https://github.com/ibm-garage-cloud/cloud-shell-commands/blob/master/README.md) to install the Cloud Shell Commands.

</AccordionItem>

</Accordion>

## CLI help

- Run the CLI's help command to list the available commands:
    ```bash
    igc --help
    ```

    The help output looks like this:

    ```bash
    $ igc --help
    IBM Garage Cloud CLI

    Usage: igc <command> [args]

    Commands:
      igc build              Build the image and push it into the IBM Cloud registry
      igc create-webhook     Create a git webhook for a given Jenkins pipeline
      igc credentials        Lists the urls and credentials for the tools deployed
                             to the cluster
      igc dashboard          Open the dashboard url in the default browser
      igc deploy             Deploy an image from the IBM Cloud registry into a
                             kubernetes cluster
      igc enable             Enable the current repository with pipeline logic
      igc endpoints          List the current ingress hosts for deployed apps in a
                             namespace       [aliases: ingress, endpoint, ingresses]
      igc generate-token     Generate a Jenkins api token
      igc git-secret [name]  Create a kubernetes secret that contains the url,
                             username, and personal access token for a git repo
      igc jenkins-auth       Generate a Jenkins api token and register it as
                             kubernetes secret
      igc launch-tools       Launch the IBM Garage for Cloud tools image connected
                             to the current directory
      igc login              Log in using the ibmcloud cli, optionally configure the
                             cluster, and optionally runs a command
      igc namespace          Create a namespace (if it doesn't exist) and prepare it
                             with the necessary configuration
      igc pipeline           Register a pipeline for the current code repository
      igc tool-config        Create the config map and secret for a tool configured
                             in the environment
      igc vlan               Print out the vlan values
      igc yq <command>

    Options:
      --version  Show version number                                       [boolean]
      --help     Show help                                                 [boolean]
    ```

## Use the CLI

<InlineNotification>

To use the <Globals name="igccli" />, first install the [prerequisite tools](/getting-started/prereqs), which include:
- The <Globals name="ic" /> CLI
- The <Globals name="kube" /> CLI
- The <Globals name="ocp" /> CLI

</InlineNotification>

To use the <Globals name="igccli" />, you must be logged into your <Globals name="ic" /> account and cluster.

- Log into your <Globals name="ic" /> account with the correct region and resource group:
    ```bash
    ibmcloud login -a cloud.ibm.com -r <region> -g <resource group>
    ```

- Log into your cluster:

<Accordion>

<AccordionItem title="Kubernetes">

```bash
ibmcloud ks cluster config --cluster <CLUSTER>
```

</AccordionItem>

<AccordionItem title="OpenShift">

```bash
oc login --server=<url> --token=<apikey>
```
</AccordionItem>

</Accordion>

Once logged in, you can use the CLI commands.

- For example, this command lists the dashboard ingress URLs for all of the install tools in the tools namespace:
    ```bash
    igc endpoints -n tools
    ```

## Available commands

### vlan

Lists the VLANs for a particular IBM Cloud region. This information is useful for preparing Terraform cluster creation steps.

The command requires that the terminal is already logged in to the cloud region. It does NOT need to be logged in to a cluster.

**Example usage**

- List a pair of public/private VLANs for a new environment to use

    ```bash
    igc vlan
    ```

### dashboard

Opens the [Developer Dashboard](/getting-started/dashboard) in the default browser. The namespace where the dashboard has been deployed can be provided with the `-n` flag. If not provided, `tools` will be used as the default. If a default browser has not been configured, then the url to the Dashboard will be printed out.

The command requires that the terminal is already logged in to the cluster.

**Example usage**

- Open the dashboard in the default browser

    ```bash
    igc dashboard
    ```

### credentials

Lists the URLs and credentials for the tools running in the <Globals name="env" />. The command identifies the tools by reading particular `ConfigMaps` and `Secrets` in the namespace. The `-n` flag specifies the namespace; the default is `tools``. The tools reported include Jenkins, SonarQube, ArgoCD, etc.

The command requires that the terminal is already logged in to the cluster.

**Example usage**

- For each tool in the specified namespace (`tools` namespace is the default), list the URL for opening the tool's dashboard and the credentials (e.g. user and password) for logging in.

    ```bash
    igc credentials -n my-namespace
    ```

### endpoints

Lists the ingress and/or route URLs for the specified namespace. The `-n` flag specifies the namespace; the default is `dev`. The results are provided in an interactive menu. If one of the endpoints is selected, it will display the URL and launch it in the default browser. Selecting `Exit` will display the full list and exit.

The command requires that the terminal is already logged in to the cluster.

**Example usage**

- List the ingresses and route URLs for the apps running in the `tools` namespace

    ```bash
    igc endpoint -n tools
    ```

### namespace

Creates a namespace (if it doesn't exist) and prepares it with the necessary configuration. A namespace in the <Globals name="env" /> isn't just an empty namespace, it contains configuration as well. This command populates the specified namesapce with that configuration:
- Adds a service account that contains the pull secrets from the `default` namespace
- Adds config maps and secrets copied from the template namespace

When the <Globals name="env" />'s cluster is an OpenShift cluster, this command will actually create a project (which is a Kubernetes namespace with additional annotations).

Command flags:
- `-t` -- The template namespace; the default is `tools`
- `-z` -- The name of the service account; the default is `default`

For an OpenShift cluster, the namespace command can optionally set up an environments in the namespace to run Jenkins and/or Tekton pipelines in the namespace.

Command flags:
- `--jenkins` -- Install Jenkins into the namespace
- `--tekton` -- Copy the available Tasks and Pipelines from the template namespace

The command requires that the terminal is already logged in to the cluster.

**Example usage**

- Create the namespace `my-namespace` and update the `default` service account in that namespace

    ```bash
    igc namespace my-namespace
    ```

- Create the namespace `another-namespace` and the service account `my-sa` and configure the Jenkins environment

    ```bash
    igc namespace another-namespace -z my-sa --jenkins
    ```

- Create the namespace `last-namespace` and update the `default` service account and configure the Tekton Tasks and Pipelines using `my-tools` as the template namespace

    ```bash
    igc namespace last-namespace -t my-tools --tekton
    ```

### pipeline

Registers a project as a Jenkins or Tekton pipeline by creating a Secret to hold
the Git authentication information, calling the Jenkins API or applying the appropriate
configuration yaml, creating a web-hook to trigger the pipeline when changes are pushed,
and triggering the initial build.

**Note:** This command is intended to be run within the repository directory of a project for
which a pipeline should be generated.

By default the pipeline deploys into the `dev` namespace. The namespace can be changed by passing
it in using the `-n` flag. If the target namespace does not exist, the command will fail with a
message to create the namespace using `igc namepace`

The pipeline command supports either `jenkins` or `tekton` pipelines using the flags:

- --jenkins or
- --tekton

Jenkins is the default if no value is provided.

The command will prompt for the username and personal access token that should stored in
the secret to access the Git repository. Those values can be provided a the command-line using the
`-u` and `-p` flags, respectively.

**Example usage**

- Create a Jenkins pipeline in the `dev` namespace and prompt for the git credentials

    ```bash
    igc pipeline --jenkins
    ```

- Create a Tekton pipeline in the existing `my-dev` namespace, using the git credentials `gituser` and `gitpat`

    ```bash
    igc pipeline -n my-dev -u gituser -p gitpat --tekton
    ```

### tool-config

Configures a tool into the template namespace. The template namespace is provided with the `-n`
argument. If not provided, the template namespace will be `tools`. The tool-config takes the
name of the tool as the first (and only) positional parameter.

Configuration for the tool
can be provided with the `--url`, `--username`, and `--password` optional flags. If the `url`
is provided then a ConfigMap will be created. If the `username` and/or `password` are provided
then a Secret will be created.

**Example usage**

- Configure a tool named `my-tool` with url `https://url.com/my-tool`, username of `admin`, and password of `password`

    ```bash
    igc tool-config my-tool --url https://url.com/my-tool --username admin --password password
    ```

### enable

"Enables" an existing project with the DevOps artifacts. The CLI reads the
 list of
 available pipelines and applies the selected pipeline to your code repo. This
  command is
  intended to be run within a git repository directory of a project for
which a pipeline should be enabled.

- Enable a project with artifacts

    ```bash
    igc enable
    ```

Once the project has been enabled, you will need to run `igc pipeline` to register the git repo as a pipeline with your target development cluster.

The `enable` command adds a number of files to the local filesystem, including but not limited to:

- Helm chart
- Jenkinsfile

After `enable` is called, the generated files should be committed and pushed to the git repository.

The default pipeline repo is `https://ibm-garage-cloud.github.io/garage-pipelines/`, but a different one can be used by providing the `--repo` argument.  The source for the provided pipeline repo can be found at `https://github.com/ibm-garage-cloud/garage-pipelines` to use as a template.
