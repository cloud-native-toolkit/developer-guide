---
title: CLI
---
import Globals from 'gatsby-theme-carbon/src/templates/Globals';

<PageDescription>

<Globals string="longName" /> include the IBM Garage for Cloud (IGC) <Globals
 string="shortName" /> Command Line Interface (CLI)

</PageDescription>

The [IGC CLI](https://github.com/ibm-garage-cloud/ibm-garage-cloud-cli) 
provides a set of helpful utilities that can be invoked from the command line
. They key objective is to make complicated CLI tasks and `YAML`,`configMap
` and `secret` configuration easier for a developer.

These utilities include:
- Register your application's git repo into a CI pipeline ([Jenkins](/guides/continuous-integration), [Tekton](/guides/continuous-integration-tekton), etc.)
- List the ingress URLs for the tools installed in the environment
- List the user names and passwords for the tools installed in the environment
- Build and deploy images to the environment using the IBM Cloud Image Registry
- Help copy `configMaps` and `secrets` into new projects/namespace in Kubernetes or OpenShift
- Enable existing code patterns with the necessary artifacts to allow them to
 be integrated easily into the <Globals string="longName" /> environment

To use the IGC CLI, it must be installed and your terminal and you are logged into IBM Cloud with the IBM Cloud CLI.

## Installation

<InlineNotification kind="warning">
<<<<<<< HEAD

**Warning**: If you have installed the **IGC CLI** prior to `v0.4.0`, you
 must uninstall it and follow the installation steps below. The uninstall command: `npm rm -g @garage-catalyst/ibm-garage-cloud-cli`

</InlineNotification>

Follow these steps to install the IGC CLI:

=======
**Warning:** If you have installed the **IGC** CLI up to `v0.4.0` you must
 uninstall it and follow the installation steps below
`npm rm -g
 @garage
-catalyst/ibm-garage
-cloud-cli`
</InlineNotification>

Follow these steps to use the IGC CLI:
>>>>>>> Updates for 43 release
- Install the CLI:
    ```bash
    npm i -g @ibmgaragecloud/cloud-native-toolkit-cli
    ````

- Verify the installed version is greater than `0.4.0`:
    ```bash
    $ igc --version
    ```

- Run the CLI's help command to list the available commands:
    ```bash
    igc --help
    ```

    The help output looks like this:

    ```bash
    % igc --help
    IBM Garage Cloud CLI

    Usage: igc <command> [args]

    Commands:
      igc build              Build the image and push it into the IBM Cloud registry
      igc create-webhook     Create a git webhook for a given Jenkins pipeline
      igc credentials        Lists the urls and credentials for the tools deployed
                             to the cluster
      igc dashboard          Open the dashboard url in the default browser
      igc deploy             Deploy an image from the IBM Cloud registry into a
                             kubernetes cluster
      igc enable             Enable the current repository with pipeline logic
      igc generate-token     Generate a Jenkins api token
      igc git-secret [name]  Create a kubernetes secret that contains the url,
                             username, and personal access token for a git repo
      igc ingress            List the current ingress hosts for deployed apps in a
                             namespace
      igc jenkins-auth       Generate a Jenkins api token and register it as
                             kubernetes secret
      igc launch-tools       Launch the IBM Garage for Cloud tools image connected
                             to the current directory
      igc login              Log in using the ibmcloud cli, optionally configure the
                             cluster, and optionally runs a command
      igc namespace          Create a namespace (if it doesn't exist) and prepare it
                             with the necessary configuration
      igc pipeline           Register a pipeline for the current code repository
      igc tool-config        Create the config map and secret for a tool configured
                             in the environment
      igc vlan               Print out the vlan values
      igc yq <command>

    Options:
      --version  Show version number                                       [boolean]
      --help     Show help                                                 [boolean]
    ```

## Use the CLI

To use the IGC CLI, you must be logged into your IBM Cloud account and cluster.

- Log into your IBM Cloud account with the correct region
 and resource group:
    ```bash
    ibmcloud login -a cloud.ibm.com -r <region> -g <resource group>
    ```

- Once logged in, you can use the CLI commands.

    For Kubernetes:
    ```bash
    ibmcloud ks cluster config --cluster CLUSTER
    ```

    For OpenShift:
    ```bash
    oc login --server=<url> --token=<apikey>
    ```

Once logged in, you can use the CLI commands.

- For example, this command lists the dashboard ingress URLs for all of the install tools in the tools namespace:
    ```bash
    igc ingress -n tools
    ```

## Available commands

### vlan

Lists the `vlans` for a particular `resource group` and `region`. The command
expects that an `ibmcloud login` has already been performed to set up the
environment. This information is useful for preparing Terraform cluster creation steps

### credentials

Prints the urls and credentials for the tools deployed into the cluster.
This includes Jenkins, Argo CD, and SonarQube, Pact, Artifactory.

### ingress

Lists the ingress urls for the provided namespace. If no namespace
is provided, `dev` is used.

### namespace

Creates a new namespace/project in your cluster and copies the necessary `configMaps` and `secrets` from the `tools` namespace.
This enables new pipelines to be registered and run and for them to have access to all the essential data needed to access the tools and the IBM Cloud platfrom.

```bash
igc namespace dev-team-a
```

### pipeline

Registers a git repository project as a Jenkins pipeline by creating a Kubernetes secret to hold
the Git authentication information, calling the Jenkins API, and creating a web-hook.
This command is intended to be run within the repository directory of a project for
which a pipeline should be generated. You can supply a new namespace for your pipeline

```
igc pipeline -n dev-team-a
```


The pipeline command supports both `jenkins` and `tekton` pipelines using the flags `--jenkins` or `--tekton`,
respectively.  Jenkins is the default if no value is provided.

```
igc pipeline -n dev-team-a --tekton
```

### tools

Launches the `ibm-garage-cli-tools` docker image in an interactive
terminal. This image provides commonly used infrastructure tools like,
`terraform`, `kubectl`, `oc` etc.

### enable

"Enables" an existing project with the DevOps artifacts. The CLI reads the
 list of
 available pipelines and applies the selected pipeline to your code repo. This
  command is
  intended to be run within a git repository directory of a project for
which a pipeline should be enabled.
```bash
igc enable
```

Once the project has been enabled you will need to run `igc pipeline` to
 register the git repo as a pipeline with your target development cluster.

The `enable` command adds a number of files to the local filesystem, including but not limited to:

- Helm chart
- Dockerfile
- Jenkinsfile

After `enable` is called, the generated files should be committed and pushed to the git repository.

The default pipeline repo is `https://ibm-garage-cloud.github.io/garage-pipelines/`, but a different one can be used by providing the `--repo` argument.  The source for the provided pipeline repo can be found at `https://github.com/ibm-garage-cloud/garage-pipelines` to use as a template.
